{"mappings":"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","sources":["src/favorites.js"],"sourcesContent":["import './js/utils/localSctorage';\nimport './js/utils/switchTheme.js';\nimport './js/utils/mobile-menu.js';\nimport './js/utils/setClass.js';\nimport './js/utils/ontopbtn.js';\n\nimport { OpenModal } from './js/utils/modal-recipes.js';\nimport renderItem from './js/renders/renders.js';\nimport startPagination from './js/utils/pagination';\n// import {hendleClickOnRecipes} from './js/renders/search.js';\n\nconst refs = {\n  favoriteCategoriesList: document.querySelector('.favorite-categories'),\n  favoriteRecipesList: document.querySelector('.favorite-list'),\n  warning: document.querySelector('.empty-storage'),\n  paginationBox: document.getElementById('pagination'),\n  categoryBtn: document.querySelector('.favorite-categories'),\n  allBtn: document.querySelector('.all-btn'),\n  hiroImg: document.querySelector('.fav-hero'),\n};\n\n// Variables\n\nlet currentBtn = '';\n\n// localStorage.clear()\n\nconst categoryRecipes = [];\n\ndocument.addEventListener('DOMContentLoaded', onFavoritesRealod);\n\nfunction calcPages() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth < 768) {\n    return 9;\n  }\n\n  if (screenWidth >= 768) {\n    return 12;\n  }\n}\n\nfunction groupObjects(array, groupSize) {\n  const result = {};\n  for (let i = 0; i < array.length; i += groupSize) {\n    const groupName = Math.floor(i / groupSize) + 1;\n    result[groupName] = array.slice(i, i + groupSize);\n  }\n  return result;\n}\n\nfunction onFavoritesRealod() {\n  const categoryMarkup = generateCategoryList();\n  refs.favoriteCategoriesList.insertAdjacentHTML('beforeend', categoryMarkup);\n  generateStorageList();\n}\n\nfunction generateStorageList(pageSet = 1) {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage);\n  if (storage) {\n    const perPage = calcPages();\n    const objData = groupObjects(data, perPage);\n    const totalPages = Object.keys(objData).length;\n\n    if (totalPages > 1) {\n      refs.paginationBox.style.display = 'block';\n      startPagination(pageSet, perPage, totalPages, generateStorageList);\n    } else {\n      refs.paginationBox.style.display = 'none';\n    }\n\n    const listMarkup = objData[pageSet].reduce(\n      (markup, { title, description, preview, rating, id }) =>\n        markup + renderItem(title, description, preview, rating, id),\n      ''\n    );\n\n    refs.favoriteRecipesList.innerHTML = listMarkup;\n  } else {\n    refs.warning.classList.remove('is-hidden');\n    refs.allBtn.classList.add('is-hidden');\n\n    if (window.innerWidth < 768) {\n      refs.hiroImg.classList.add('is-hidden');\n    }\n  }\n}\n\nfunction generateCategoryList() {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage);\n  if (storage) {\n    return data\n      .flatMap(recipe => recipe.category)\n      .filter((category, index, array) => array.indexOf(category) === index)\n      .reduce(\n        (categoryMarkup, category) => categoryMarkup + renderCategory(category),\n        ''\n      );\n  }\n  return '';\n}\n\nfunction renderCategory(category) {\n  return `<li class=\"list\"><button class=\"button-fav\">${category}</button></li>`;\n}\n\nrefs.categoryBtn.addEventListener('click', filterByCategory);\n\nfunction filterByCategory(evt) {\n  let data = [];\n  let categoryRecipes;\n  refs.favoriteRecipesList.innerHTML = '';\n\n  if (evt !== Number(evt) && evt.target.nodeName === 'BUTTON') {\n    setActiveClass(evt);\n    if (evt.target.name === 'all') return generateStorageList();\n    else currentBtn = evt.target.textContent;\n  }\n\n  const storage = localStorage.getItem('favorites');\n  data = JSON.parse(storage);\n\n  categoryRecipes = [...data.filter(recipe => recipe.category === currentBtn)];\n\n  let pageSet = 1;\n\n  if (Number(evt) === evt) pageSet = evt;\n\n  const perPage = calcPages();\n  const objData = groupObjects(categoryRecipes, perPage);\n  const totalPages = Object.keys(objData).length;\n\n  if (totalPages > 1) {\n    refs.paginationBox.style.display = 'block';\n    startPagination(pageSet, perPage, totalPages, filterByCategory);\n  } else {\n    refs.paginationBox.style.display = 'none';\n  }\n\n  const listMarkup = objData[pageSet].reduce(\n    (markup, { title, description, preview, rating, id }) =>\n      markup + renderItem(title, description, preview, rating, id),\n    ''\n  );\n\n  refs.favoriteRecipesList.innerHTML = listMarkup;\n\n  // const markup = generateCategoryMarkup(categoryRecipes);\n  // if (!markup) throw new Error('No result');\n  // refs.favoriteRecipesList.insertAdjacentHTML('beforeend', markup);\n}\n\n// function generateCategoryMarkup(categoryRecipes) {\n//   return categoryRecipes.reduce(\n//     (markup, { title, description, preview, rating, id }) =>\n//       markup + renderItem(title, description, preview, rating, id),\n//     ''\n//   );\n// }\n\nfunction setActiveClass({ target }) {\n  const btn = document.querySelector('.onActive');\n  btn.classList.remove('onActive');\n  target.classList.add('onActive');\n}\n"],"names":["$5680453e957fa117$var$refs","favoriteCategoriesList","document","querySelector","favoriteRecipesList","warning","paginationBox","getElementById","categoryBtn","allBtn","hiroImg","$5680453e957fa117$var$currentBtn","$5680453e957fa117$var$calcPages","screenWidth","window","innerWidth","$5680453e957fa117$var$groupObjects","array","groupSize","result","i","length","Math","floor","slice","$5680453e957fa117$var$generateStorageList","pageSet","storage","localStorage","getItem","data","JSON","parse","perPage","objData","totalPages","Object","keys","style","display","$JcIhZ","default","listMarkup","reduce","markup","title","description","preview","rating","id","$cYlGq","innerHTML","classList","remove","add","addEventListener","categoryMarkup","flatMap","recipe","category","filter","index","indexOf","$5680453e957fa117$var$renderCategory","$5680453e957fa117$var$generateCategoryList","insertAdjacentHTML","$5680453e957fa117$var$filterByCategory","evt","categoryRecipes1","Number","target","nodeName","$5680453e957fa117$var$setActiveClass","name","textContent"],"version":3,"file":"favorites.d7b08170.js.map"}