{"mappings":"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","sources":["src/favorites.js"],"sourcesContent":["import './js/utils/localSctorage';\nimport './js/utils/switchTheme.js';\nimport './js/utils/mobile-menu.js';\nimport './js/utils/setClass.js';\nimport './js/utils/ontopbtn.js';\nimport './js/utils/modal-recipes';\n\nimport renderItem from './js/renders/renders.js';\nimport startPagination from './js/utils/pagination';\nimport { OpenModal } from './js/utils/modal-recipes';\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  favoriteCategoriesList: document.querySelector('.favorite-categories'),\n  favoriteRecipesList: document.querySelector('.favorite-list'),\n  warning: document.querySelector('.empty-storage'),\n  paginationBox: document.getElementById('pagination'),\n  categoryBtn: document.querySelector('.favorite-categories'),\n  allBtn: document.querySelector('.all-btn'),\n  hiroImg: document.querySelector('.fav-hero'),\n  recipesBox: document.getElementById('image-container'),\n  modal: document.getElementById('scroll-rec'),\n};\n\n// Variables\n\nlet currentBtn = '';\n\nconst categoryRecipes = [];\n\ndocument.addEventListener('DOMContentLoaded', onFavoritesRealod);\n\nfunction calcPages() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth < 768) {\n    return 9;\n  }\n\n  if (screenWidth >= 768) {\n    return 12;\n  }\n}\n\nfunction groupObjects(array, groupSize) {\n  const result = {};\n  for (let i = 0; i < array.length; i += groupSize) {\n    const groupName = Math.floor(i / groupSize) + 1;\n    result[groupName] = array.slice(i, i + groupSize);\n  }\n  return result;\n}\n\nexport function onFavoritesRealod() {\n  const categoryMarkup = generateCategoryList();\n\n  const allCatBtn = `<button class=\"button-fav all-btn onActive\" name=\"all\">All categories</button>`;\n\n  const data = JSON.parse(localStorage.getItem('favorites'));\n\n  refs.favoriteRecipesList.innerHTML = '';\n  refs.favoriteCategoriesList.innerHTML = '';\n\n  if (data.length) {\n    refs.favoriteCategoriesList.innerHTML = `${allCatBtn}${categoryMarkup}`;\n  }\n\n  generateStorageList();\n}\n\nfunction generateStorageList(pageSet = 1) {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage);\n\n  refs.allBtn.style.display = 'none';\n\n  if (data.length) {\n    refs.allBtn.style.display = 'block';\n\n    const perPage = calcPages();\n    const objData = groupObjects(data, perPage);\n    const totalPages = Object.keys(objData).length;\n\n    if (totalPages > 1) {\n      refs.paginationBox.style.display = 'block';\n      startPagination(pageSet, perPage, totalPages, generateStorageList);\n    } else {\n      refs.paginationBox.style.display = 'none';\n    }\n\n    const listMarkup = objData[pageSet].reduce(\n      (markup, { title, description, preview, rating, id, category }) =>\n        markup + renderItem(title, description, preview, rating, id, category),\n      ''\n    );\n\n    refs.favoriteRecipesList.innerHTML = listMarkup;\n  } else {\n    refs.warning.classList.remove('is-hidden');\n    refs.allBtn.classList.add('is-hidden');\n\n    if (window.innerWidth < 768) {\n      refs.hiroImg.classList.add('is-hidden');\n    }\n  }\n}\n\nfunction generateCategoryList() {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage);\n  if (storage) {\n    return data\n      .flatMap(recipe => recipe.category)\n      .filter((category, index, array) => array.indexOf(category) === index)\n      .reduce(\n        (categoryMarkup, category) => categoryMarkup + renderCategory(category),\n        ''\n      );\n  }\n  return '';\n}\n\nfunction renderCategory(category) {\n  return `<button class=\"button-fav\">${category}</button>`;\n}\n\nrefs.categoryBtn.addEventListener('click', filterByCategory);\n\nfunction filterByCategory(evt) {\n  let data = [];\n  let categoryRecipes;\n  refs.favoriteRecipesList.innerHTML = '';\n\n  if (evt !== Number(evt) && evt.target.nodeName === 'BUTTON') {\n    setActiveClass(evt);\n    if (evt.target.name === 'all') return generateStorageList();\n    else currentBtn = evt.target.textContent;\n  }\n\n  const storage = localStorage.getItem('favorites');\n  data = JSON.parse(storage);\n\n  categoryRecipes = [...data.filter(recipe => recipe.category === currentBtn)];\n\n  let pageSet = 1;\n\n  if (Number(evt) === evt) pageSet = evt;\n\n  const perPage = calcPages();\n  const objData = groupObjects(categoryRecipes, perPage);\n  const totalPages = Object.keys(objData).length;\n\n  if (totalPages > 1) {\n    refs.paginationBox.style.display = 'block';\n    startPagination(pageSet, perPage, totalPages, filterByCategory);\n  } else {\n    refs.paginationBox.style.display = 'none';\n  }\n\n  const listMarkup = objData[pageSet].reduce(\n    (markup, { title, description, preview, rating, id, category }) =>\n      markup + renderItem(title, description, preview, rating, id, category),\n    ''\n  );\n\n  refs.favoriteRecipesList.innerHTML = listMarkup;\n\n  // const markup = generateCategoryMarkup(categoryRecipes);\n  // if (!markup) throw new Error('No result');\n  // refs.favoriteRecipesList.insertAdjacentHTML('beforeend', markup);\n}\n\n// function generateCategoryMarkup(categoryRecipes) {\n//   return categoryRecipes.reduce(\n//     (markup, { title, description, preview, rating, id }) =>\n//       markup + renderItem(title, description, preview, rating, id),\n//     ''\n//   );\n// }\n\nfunction setActiveClass({ target }) {\n  const btn = document.querySelector('.onActive');\n  if (!btn) return refs.allBtn.classList.add('onActive');\n  btn.classList.remove('onActive');\n  target.classList.add('onActive');\n}\n\nfunction toggleFavriteRecipe(currentBtn) {\n  const recipeInfo = JSON.parse(currentBtn.dataset.info);\n\n  currentBtn.classList.toggle('active');\n  const storage = JSON.parse(localStorage.getItem('favorites')) ?? [];\n  if (currentBtn.classList.contains('active')) {\n    if (storage.find(el => el.id === recipeInfo.id)) {\n      return Notiflix.Notify.info('Recipe was added earlier');\n    }\n    localStorage.setItem('favorites', JSON.stringify([...storage, recipeInfo]));\n  } else {\n    localStorage.setItem(\n      'favorites',\n      JSON.stringify([...storage.filter(el => el.id !== recipeInfo.id)])\n    );\n  }\n}\n\nfunction checkCategory(target) {\n  const currentRec = target.closest('div.recipe-item').dataset.category;\n  const storageItems = JSON.parse(localStorage.getItem('favorites'));\n  const isCategoryLocal = storageItems.find(el => el.category === currentRec);\n  const isCategoryRendered = [...refs.favoriteCategoriesList.children].find(\n    el => el.textContent === currentRec\n  );\n  if (!isCategoryLocal && isCategoryRendered) {\n    isCategoryRendered.remove();\n  } else if (isCategoryLocal && !isCategoryRendered) {\n    refs.favoriteCategoriesList.insertAdjacentHTML(\n      'beforeend',\n      renderCategory(currentRec)\n    );\n  }\n\n  if (!storageItems.length) refs.allBtn.style.display = 'none';\n  else refs.allBtn.style.display = 'block';\n}\n\nfunction hendleClickOnRecipes({ target }) {\n  if (!target.closest('button')) return;\n  const currentBtn = target.closest('button');\n  if (currentBtn.name === 'favorite') {\n    toggleFavriteRecipe(currentBtn);\n    checkCategory(target);\n  }\n  if (currentBtn.name === 'details') {\n    OpenModal(currentBtn);\n  }\n}\n\nrefs.recipesBox.addEventListener('click', hendleClickOnRecipes);\n\nrefs.modal.addEventListener('click', ({ target }) => {\n  if ((target.className = 'save-recipes-btn')) {\n    return onFavoritesRealod();\n  }\n});\n"],"names":["$8nrFW","parcelRequire","$f872ae3cf3d9dd7f$var$refs","favoriteCategoriesList","document","querySelector","favoriteRecipesList","warning","paginationBox","getElementById","categoryBtn","allBtn","hiroImg","recipesBox","modal","$f872ae3cf3d9dd7f$var$currentBtn","$f872ae3cf3d9dd7f$var$calcPages","screenWidth","window","innerWidth","$f872ae3cf3d9dd7f$var$groupObjects","array","groupSize","result","i","length","Math","floor","slice","$f872ae3cf3d9dd7f$export$fcf18f584cedf68f","categoryMarkup","storage","localStorage","getItem","data","JSON","parse","flatMap","recipe","category","filter","index","indexOf","reduce","$f872ae3cf3d9dd7f$var$renderCategory","$f872ae3cf3d9dd7f$var$generateCategoryList","innerHTML","concat","$f872ae3cf3d9dd7f$var$generateStorageList","pageSet","arguments","style","display","perPage","objData","totalPages","Object","keys","$5IDkG","default","listMarkup","markup","param","title","description","preview","rating","id","$7Mtae","classList","remove","add","addEventListener","$f872ae3cf3d9dd7f$var$filterByCategory","evt","categoryRecipes1","Number","target","nodeName","btn","$f872ae3cf3d9dd7f$var$setActiveClass","name","textContent","$parcel$interopDefault","closest","currentBtn2","currentBtn1","ref","recipeInfo","dataset","info","toggle","contains","find","el","$6JpON","Notify","setItem","stringify","$f872ae3cf3d9dd7f$var$toggleFavriteRecipe","currentRec","storageItems","isCategoryLocal","isCategoryRendered","children","insertAdjacentHTML","$f872ae3cf3d9dd7f$var$checkCategory","$6PU4E","OpenModal","className"],"version":3,"file":"favorites.1399f6ee.js.map"}