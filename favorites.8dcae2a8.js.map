{"mappings":"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","sources":["src/js/utils/favoriteBox.js"],"sourcesContent":["import renderItem from '../renders/renders';\nimport startPagination from './pagination';\nimport { AddToFav, OpenModal } from './modal-recipes';\nimport { changeThemePagination } from './switchTheme.js';\nimport Notiflix from 'notiflix';\n\nconst refs = {\n  favoriteCategoriesList: document.querySelector('.favorite-categories'),\n  favoriteRecipesList: document.querySelector('.favorite-list'),\n  warning: document.querySelector('.empty-storage'),\n  paginationBox: document.getElementById('pagination'),\n  categoryBtn: document.querySelector('.favorite-categories'),\n  allBtn: document.querySelector('.all-btn'),\n  hiroImg: document.querySelector('.fav-hero'),\n  recipesBox: document.getElementById('image-container'),\n  modal: document.getElementById('scroll-rec'),\n  saveRecipeBtn: document.querySelector('.save-recipes-btn'),\n};\n\n// Variables\n\nlet currentBtn = '';\n\nconst categoryRecipes = [];\n\nfunction calcPages() {\n  const screenWidth = window.innerWidth;\n\n  if (screenWidth < 768) {\n    return 9;\n  }\n\n  if (screenWidth >= 768) {\n    return 12;\n  }\n}\n\nfunction groupObjects(array, groupSize) {\n  const result = {};\n  for (let i = 0; i < array.length; i += groupSize) {\n    const groupName = Math.floor(i / groupSize) + 1;\n    result[groupName] = array.slice(i, i + groupSize);\n  }\n  return result;\n}\n\nfunction onFavoritesRealod() {\n  const categoryMarkup = generateCategoryList();\n\n  const allCatBtn = `<button class=\"button-fav all-btn onActive\" name=\"all\">All categories</button>`;\n\n  const data = JSON.parse(localStorage.getItem('favorites'));\n\n  refs.favoriteRecipesList.innerHTML = '';\n  refs.favoriteCategoriesList.innerHTML = '';\n\n  if (data && data.length) {\n    refs.favoriteCategoriesList.innerHTML = `${allCatBtn}${categoryMarkup}`;\n  } else {\n    refs.allBtn.style.display = 'none';\n  }\n\n  generateStorageList();\n}\n\nfunction generateStorageList(pageSet = 1) {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage);\n\n  refs.allBtn.style.display = 'none';\n\n  if (data && data.length) {\n    refs.allBtn.style.display = 'block';\n\n    const perPage = calcPages();\n    const objData = groupObjects(data, perPage);\n    const totalPages = Object.keys(objData).length;\n\n    if (totalPages > 1) {\n      refs.paginationBox.style.display = 'block';\n      startPagination(pageSet, perPage, totalPages, generateStorageList);\n\n      changeThemePagination();\n    } else {\n      refs.paginationBox.style.display = 'none';\n    }\n\n    const listMarkup = objData[pageSet].reduce(\n      (markup, { title, description, preview, rating, id, category }) =>\n        markup + renderItem(title, description, preview, rating, id, category),\n      ''\n    );\n\n    refs.favoriteRecipesList.innerHTML = listMarkup;\n    refs.warning.classList.add('is-hidden');\n  } else {\n    refs.warning.classList.remove('is-hidden');\n    refs.allBtn.classList.add('is-hidden');\n\n    if (window.innerWidth < 768) {\n      refs.hiroImg.classList.add('is-hidden');\n    }\n  }\n}\n\nfunction generateCategoryList() {\n  const storage = localStorage.getItem('favorites');\n  const data = JSON.parse(storage);\n  if (storage) {\n    return data\n      .flatMap(recipe => recipe.category)\n      .filter((category, index, array) => array.indexOf(category) === index)\n      .reduce(\n        (categoryMarkup, category) => categoryMarkup + renderCategory(category),\n        ''\n      );\n  }\n  return '';\n}\n\nfunction renderCategory(category) {\n  return `<button class=\"button-fav\">${category}</button>`;\n}\n\nrefs.categoryBtn.addEventListener('click', filterByCategory);\n\nfunction filterByCategory(evt) {\n  if (evt.target.classList.contains('onActive')) return;\n\n  let data = [];\n  let categoryRecipes;\n  refs.favoriteRecipesList.innerHTML = '';\n\n  if (evt !== Number(evt) && evt.target.nodeName === 'BUTTON') {\n    setActiveClass(evt);\n    if (evt.target.name === 'all') return generateStorageList();\n    else currentBtn = evt.target.textContent;\n  }\n\n  const storage = localStorage.getItem('favorites');\n  data = JSON.parse(storage);\n\n  if (!data.length) {\n    refs.favoriteCategoriesList.style.display = 'none';\n\n    return;\n  }\n\n  categoryRecipes = [...data.filter(recipe => recipe.category === currentBtn)];\n\n  let pageSet = 1;\n\n  if (Number(evt) === evt) pageSet = evt;\n\n  const perPage = calcPages();\n  const objData = groupObjects(categoryRecipes, perPage);\n  const totalPages = Object.keys(objData).length;\n\n  if (totalPages > 1) {\n    refs.paginationBox.style.display = 'block';\n    startPagination(pageSet, perPage, totalPages, filterByCategory);\n  } else {\n    refs.paginationBox.style.display = 'none';\n  }\n\n  const listMarkup = objData[pageSet].reduce(\n    (markup, { title, description, preview, rating, id, category }) =>\n      markup + renderItem(title, description, preview, rating, id, category),\n    ''\n  );\n\n  refs.favoriteRecipesList.innerHTML = listMarkup;\n}\n\nfunction setActiveClass({ target }) {\n  const btn = document.querySelector('.onActive');\n  if (!btn) return refs.allBtn.classList.add('onActive');\n  btn.classList.remove('onActive');\n  target.classList.add('onActive');\n}\n\nfunction removeFavriteRecipe(currentBtn) {\n  const recipeInfo = JSON.parse(currentBtn.dataset.info);\n\n  const storage = JSON.parse(localStorage.getItem('favorites'));\n  localStorage.setItem(\n    'favorites',\n    JSON.stringify([...storage.filter(el => el.id !== recipeInfo.id)])\n  );\n  onFavoritesRealod();\n}\n\nfunction checkCategory(target) {\n  const currentRec = target.closest('div.recipe-item').dataset.category;\n  const storageItems = JSON.parse(localStorage.getItem('favorites'));\n  const isCategoryLocal = storageItems.find(el => el.category === currentRec);\n  const isCategoryRendered = [...refs.favoriteCategoriesList.children].find(\n    el => el.textContent === currentRec\n  );\n  if (!isCategoryLocal && isCategoryRendered) {\n    isCategoryRendered.remove();\n  } else if (isCategoryLocal && !isCategoryRendered) {\n    refs.favoriteCategoriesList.insertAdjacentHTML(\n      'beforeend',\n      renderCategory(currentRec)\n    );\n  }\n\n  if (!storageItems.length) refs.allBtn.style.display = 'none';\n  else refs.allBtn.style.display = 'block';\n}\n\nfunction toggleFavorite(e) {\n  AddToFav(e);\n  onFavoritesRealod();\n}\n\nfunction hendleClickOnRecipes({ target }) {\n  if (!target.closest('button')) return;\n  const currentBtn = target.closest('button');\n  if (currentBtn.name === 'favorite') {\n    removeFavriteRecipe(currentBtn);\n    checkCategory(target);\n  }\n  if (currentBtn.name === 'details') {\n    OpenModal(currentBtn);\n    refs.saveRecipeBtn.removeEventListener('click', AddToFav);\n  }\n}\n\nrefs.saveRecipeBtn.addEventListener('click', toggleFavorite);\nrefs.recipesBox.addEventListener('click', hendleClickOnRecipes);\ndocument.addEventListener('DOMContentLoaded', onFavoritesRealod);\n"],"names":["$cYlGq","parcelRequire","$2349a505257b7481$var$refs","favoriteCategoriesList","document","querySelector","favoriteRecipesList","warning","paginationBox","getElementById","categoryBtn","allBtn","hiroImg","recipesBox","modal","saveRecipeBtn","$2349a505257b7481$var$currentBtn","$2349a505257b7481$var$calcPages","screenWidth","window","innerWidth","$2349a505257b7481$var$groupObjects","array","groupSize","result","i","length","Math","floor","slice","$2349a505257b7481$var$onFavoritesRealod","categoryMarkup","storage","localStorage","getItem","data","JSON","parse","flatMap","recipe","category","filter","index","indexOf","reduce","$2349a505257b7481$var$renderCategory","$2349a505257b7481$var$generateCategoryList","innerHTML","style","display","$2349a505257b7481$var$generateStorageList","pageSet","perPage","objData","totalPages","Object","keys","$JcIhZ","default","$9c7ox","changeThemePagination","listMarkup","markup","title","description","preview","rating","id","classList","add","remove","addEventListener","$2349a505257b7481$var$filterByCategory","evt","target","contains","categoryRecipes1","Number","nodeName","btn","$2349a505257b7481$var$setActiveClass","name","textContent","e","$2LJO6","AddToFav","closest","currentBtn2","currentBtn1","recipeInfo","dataset","info","setItem","stringify","el","$2349a505257b7481$var$removeFavriteRecipe","currentRec","storageItems","isCategoryLocal","find","isCategoryRendered","children","insertAdjacentHTML","$2349a505257b7481$var$checkCategory","OpenModal","removeEventListener"],"version":3,"file":"favorites.8dcae2a8.js.map"}